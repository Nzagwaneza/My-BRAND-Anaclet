<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="Articles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Montserrat&display=swap"
    />

    <title>My Brand Anaclet_Articles</title>
  </head>

  <body class="my_page">
    <div class="Header">
      <div class="header-menu">
        <img class="brandname" src="Icons/logo.JPG" alt="Logo" />
        <div class="header-menu-large">
          <a href="Login.html" class="headerlink1">Login</a>
          <a href="" class="headerlink2">Subscribe</a>
          <a href="" class="headerlink3">Contact Me</a>
        </div>
        <img
          class="profilepic"
          src="Icons/profilePic1.jpg"
          alt="Profile Picture"
        />
      </div>
      <div class="header-menu-small">
        <a href="Login.html" class="headerlink1">Login</a>
        <a href="" class="headerlink2">Subscribe</a>
        <a href="" class="headerlink3">Contact Me</a>
      </div>
    </div>
    <div class="Main-Big-One">
      <div class="leftside">
        <div class="menu">
          <a href="Home.html">Home</a>
          <a href="AboutMe.html">About Me</a>
          <a href="Skills.html">My skills</a>
          <a href="Articles.html">Articles</a>
        </div>
      </div>
      <div class="Titles">
        <span><strong>The list of articles</strong></span>
      </div>
      <div class="Main">
        <div class="main_area">
          <div onmouseover="previewContent()" class="forAll_Articles">
            <div class="Articlephoto1">
              <img id="mainPic" src="Icons/For article 1.png" alt="" />
            </div>
            <div class="remainingside">
              <span id="title"
                ><strong>My journal in coding life.</strong></span
              >
              <div class="art_Right">
                <img
                  class="Authorpic"
                  id="Authorpic"
                  src="Icons/profilePic1.jpg"
                  alt="Author's Picture"
                />
                <div class="description">
                  <span id="nameOfAuthor"
                    ><strong>Author's name:</strong> Anaclet Nzg</span
                  >
                  <span id="uploadDate"
                    ><strong>Date uploaded:</strong> 02 Feb 2024</span
                  >
                </div>
              </div>
              <button onclick="window.location.href = 'Articleview.html';">
                View
              </button>
            </div>
          </div>
        </div>
        <div class="rightside">
          <span
            ><strong id="previewtext"
              >Look at the preview here. <br />
              <br /></strong
          ></span>
          <div id="preview"></div>
        </div>
      </div>
    </div>

    <script>
      const articleDataString = localStorage.getItem("articleData");
      const articleData = JSON.parse(articleDataString);

      if (articleData) {
        const authorName = articleData.authorName;
        const uploadDate = articleData.uploadDate;
        const title = articleData.title;
        const summary = articleData.summary;
        const articleText = articleData.articleText;
        const profilePicture = articleData.profilePicture;
        const mainPicture = articleData.mainPicture;

        if (authorName) {
          document.getElementById("nameOfAuthor").innerHTML =
            "<strong>Author's name:</strong> " + authorName;
        }

        if (uploadDate) {
          document.getElementById("uploadDate").innerHTML =
            "<strong>Date uploaded:</strong> " + uploadDate;
        }

        if (title) {
          document.getElementById("title").innerHTML =
            "<strong>Title:</strong> " + title;
        }

        if (summary) {
          document.getElementById("preview").innerHTML = summary;
        }

        if (profilePicture) {
          document.getElementById("Authorpic").src = profilePicture;
        }

        if (mainPicture) {
          document.getElementById("mainPicture").src = mainPicture;
        }
      }

      function previewContent() {
        const summary = articleData
          ? articleData.summary
          : "No summary available";
        document.getElementById("preview").innerHTML = summary;
      }

      function handleFormSubmission(event) {
        event.preventDefault();

        var title = document.getElementById("textTitle").value;
        var authorName = document.getElementById("Authorname").value;
        var summary = document.getElementById("Summary").value;
        var articleText = document.getElementById("articleText").value;
        var profilePicture = document.getElementById("profilePicture").files[0];
        var mainPicture = document.getElementById("mainPicture").files[0];

        var newDiv = document.createElement("div");
        newDiv.className = "articleData";

        newDiv.innerHTML = `
            <h2>${title}</h2>
            <p><strong>Author:</strong> ${authorName}</p>
            <p>${summary}</p>
            <p>${articleText}</p>
            <img src="${
              profilePicture ? URL.createObjectURL(profilePicture) : ""
            }" alt="Profile Picture">
            <img src="${
              mainPicture ? URL.createObjectURL(mainPicture) : ""
            }" alt="Main Picture">
        `;

        document.getElementById("articlesContainer").appendChild(newDiv);

        document.getElementById("textTitle").value = "";
        document.getElementById("Authorname").value = "";
        document.getElementById("Summary").value = "";
        document.getElementById("articleText").value = "";
        document.getElementById("profilePicture").value = "";
        document.getElementById("mainPicture").value = "";

        alert("A new article has been added!");
      }

      document
        .getElementById("submitButton")
        .addEventListener("click", handleFormSubmission);
    </script>
  </body>
</html>
